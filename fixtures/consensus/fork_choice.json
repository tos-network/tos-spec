{
  "cases": [
    {
      "name": "consensus_fork_choice_cumulative_difficulty",
      "description": "Select tip with highest cumulative difficulty",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": null,
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "consensus_fork_choice_same_height_different_difficulty",
      "description": "At same height, prefer higher cumulative difficulty",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": null,
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "consensus_fork_choice_tie_breaker_hash",
      "description": "Tie-break by block hash when difficulty equal",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": null,
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "consensus_fork_choice_invalid_tip_rejected",
      "description": "Invalid blocks are never selected as tips",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": null,
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "consensus_fork_choice_dag_multiple_tips",
      "description": "DAG can maintain multiple valid tips simultaneously",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": null,
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "consensus_fork_choice_topoheight_ordering",
      "description": "TopoHeight provides total ordering for execution",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": null,
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "consensus_fork_choice_reorg_deeper_than_stable",
      "description": "Cannot reorg past STABLE_LIMIT depth",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": null,
      "expected": {
        "ok": false,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "consensus_fork_choice_lower_difficulty_rejected",
      "description": "Chain with lower cumulative difficulty is rejected",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": null,
      "expected": {
        "ok": false,
        "error": "LOWER_CUMULATIVE_DIFFICULTY",
        "post_state": null
      }
    },
    {
      "name": "consensus_fork_choice_block_deviation",
      "description": "Block that deviates too much from tips is rejected",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": null,
      "expected": {
        "ok": false,
        "error": "BLOCK_DEVIATION",
        "post_state": null
      }
    },
    {
      "name": "consensus_fork_choice_non_reachability",
      "description": "Block tips must not be ancestors of each other",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": null,
      "expected": {
        "ok": false,
        "error": "INVALID_REACHABILITY",
        "post_state": null
      }
    }
  ]
}
