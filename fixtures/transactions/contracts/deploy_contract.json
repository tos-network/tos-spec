{
  "cases": [
    {
      "name": "tx_deploy_contract_basic",
      "description": "Basic contract deployment",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "66f23e5e5ef1864818e644f2be4064c38a071776674a0dcf1414f85de2c8c79f",
            "balance": 500000000,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "66f23e5e5ef1864818e644f2be4064c38a071776674a0dcf1414f85de2c8c79f",
        "tx_type": "deploycontract",
        "payload": [],
        "fee": 100000000,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      },
      "runnable": false
    },
    {
      "name": "tx_deploy_contract_with_constructor",
      "description": "Deploy contract with constructor invocation",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "deploycontract",
        "payload": [],
        "fee": 200000000,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      },
      "runnable": false
    },
    {
      "name": "tx_deploy_contract_insufficient_burn",
      "description": "Deployment fails without 1 TOS burn fee",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "deploycontract",
        "payload": [],
        "fee": 50000000,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": false,
        "error": "INSUFFICIENT_FEE",
        "post_state": null
      },
      "runnable": false
    },
    {
      "name": "tx_deploy_contract_invalid_wasm",
      "description": "Deployment fails with invalid WASM bytecode",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "deploycontract",
        "payload": [],
        "fee": 100000000,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": false,
        "error": "INVALID_MODULE",
        "post_state": null
      },
      "runnable": false
    },
    {
      "name": "tx_deploy_contract_empty_module",
      "description": "Deployment fails with empty module",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "deploycontract",
        "payload": [],
        "fee": 100000000,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": false,
        "error": "EMPTY_MODULE",
        "post_state": null
      },
      "runnable": false
    },
    {
      "name": "tx_deploy_contract_module_too_large",
      "description": "Deployment fails if module exceeds size limit",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "deploycontract",
        "payload": [],
        "fee": 100000000,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": false,
        "error": "MODULE_TOO_LARGE",
        "post_state": null
      },
      "runnable": false
    },
    {
      "name": "tx_deploy_contract_constructor_fails",
      "description": "Deployment succeeds even if constructor fails",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "deploycontract",
        "payload": [],
        "fee": 200000000,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      },
      "runnable": false
    },
    {
      "name": "tx_deploy_contract_constructor_out_of_gas",
      "description": "Constructor execution stops at gas limit",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "deploycontract",
        "payload": [],
        "fee": 101000,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      },
      "runnable": false
    },
    {
      "name": "tx_deploy_contract_multiple_deposits",
      "description": "Constructor with multiple asset deposits",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "deploycontract",
        "payload": [],
        "fee": 200000000,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      },
      "runnable": false
    },
    {
      "name": "tx_deploy_contract_max_deposits",
      "description": "Maximum 255 deposits per constructor",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "deploycontract",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      },
      "runnable": false
    },
    {
      "name": "tx_deploy_contract_exceed_max_deposits",
      "description": "Exceeding 255 deposits rejected",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "deploycontract",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": false,
        "error": "TOO_MANY_DEPOSITS",
        "post_state": null
      },
      "runnable": false
    },
    {
      "name": "tx_deploy_contract_gas_burn",
      "description": "30% of gas fees are burned",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": null,
      "expected": {
        "ok": false,
        "error": null,
        "post_state": null
      },
      "runnable": false
    },
    {
      "name": "tx_deploy_contract_payload_structure",
      "description": "DeployContractPayload wire format",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": null,
      "expected": {
        "ok": false,
        "error": null,
        "post_state": null
      },
      "runnable": false
    },
    {
      "name": "tx_deploy_contract_address_derivation",
      "description": "Contract address is the deployment transaction hash",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": null,
      "expected": {
        "ok": false,
        "error": null,
        "post_state": null
      },
      "runnable": false
    }
  ]
}
