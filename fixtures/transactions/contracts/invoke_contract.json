{
  "cases": [
    {
      "name": "tx_invoke_contract_basic",
      "description": "Basic contract invocation",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "73167ff2569bf1157ab47933678696c59c84457e551976a4974d3b9098107c7b",
            "balance": 500000000,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "ea53426b3c973d2c81f88cca93369457af5efdd1d3eb9bba78f842981a0cee45",
            "balance": 0,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "73167ff2569bf1157ab47933678696c59c84457e551976a4974d3b9098107c7b",
        "tx_type": "invokecontract",
        "payload": [],
        "fee": 100000000,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "tx_invoke_contract_with_deposit",
      "description": "Contract call with TOS deposit",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "ea53426b3c973d2c81f88cca93369457af5efdd1d3eb9bba78f842981a0cee45",
            "balance": 0,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "ea53426b3c973d2c81f88cca93369457af5efdd1d3eb9bba78f842981a0cee45",
        "tx_type": "invokecontract",
        "payload": [],
        "fee": 50000000,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "tx_invoke_contract_with_parameters",
      "description": "Contract call with typed parameters",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "ea53426b3c973d2c81f88cca93369457af5efdd1d3eb9bba78f842981a0cee45",
            "balance": 0,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "ea53426b3c973d2c81f88cca93369457af5efdd1d3eb9bba78f842981a0cee45",
        "tx_type": "invokecontract",
        "payload": [],
        "fee": 50000000,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "tx_invoke_contract_nonexistent",
      "description": "Invoke non-existent contract fails",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "73d883bc21979558092583e7687faccebeb455c11fb35414d24e93a38932045b",
            "balance": 0,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "73d883bc21979558092583e7687faccebeb455c11fb35414d24e93a38932045b",
        "tx_type": "invokecontract",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": false,
        "error": "CONTRACT_NOT_FOUND",
        "post_state": null
      }
    },
    {
      "name": "tx_invoke_contract_invalid_entry_point",
      "description": "Invoke invalid entry point fails",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "ea53426b3c973d2c81f88cca93369457af5efdd1d3eb9bba78f842981a0cee45",
            "balance": 0,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "ea53426b3c973d2c81f88cca93369457af5efdd1d3eb9bba78f842981a0cee45",
        "tx_type": "invokecontract",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": false,
        "error": "INVALID_ENTRY_POINT",
        "post_state": null
      }
    },
    {
      "name": "tx_invoke_contract_insufficient_gas",
      "description": "Execution stops when gas exhausted",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "ea53426b3c973d2c81f88cca93369457af5efdd1d3eb9bba78f842981a0cee45",
            "balance": 0,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "ea53426b3c973d2c81f88cca93369457af5efdd1d3eb9bba78f842981a0cee45",
        "tx_type": "invokecontract",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "tx_invoke_contract_max_gas_limit",
      "description": "max_gas cannot exceed MAX_GAS_USAGE_PER_TX",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "invokecontract",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": false,
        "error": "GAS_LIMIT_EXCEEDED",
        "post_state": null
      }
    },
    {
      "name": "tx_invoke_contract_multiple_deposits",
      "description": "Contract call with multiple asset deposits",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "invokecontract",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "tx_invoke_contract_max_deposits",
      "description": "Maximum 255 deposits per invocation",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": null,
      "expected": {
        "ok": false,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "tx_invoke_contract_insufficient_deposit",
      "description": "Insufficient balance for deposit",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "invokecontract",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": false,
        "error": "INSUFFICIENT_BALANCE",
        "post_state": null
      }
    },
    {
      "name": "tx_invoke_contract_revert",
      "description": "Contract execution revert behavior",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "invokecontract",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "tx_invoke_contract_gas_burn",
      "description": "30% of execution gas is burned",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": null,
      "expected": {
        "ok": false,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "tx_invoke_contract_storage_fees",
      "description": "Storage operations have additional fees",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": null,
      "expected": {
        "ok": false,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "tx_invoke_contract_payload_structure",
      "description": "InvokeContractPayload wire format",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": null,
      "expected": {
        "ok": false,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "tx_invoke_contract_value_cell_types",
      "description": "Supported parameter value types",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": null,
      "expected": {
        "ok": false,
        "error": null,
        "post_state": null
      }
    }
  ]
}
