{
  "cases": [
    {
      "name": "ephemeral_message_success",
      "pre_state": {
        "network_chain_id": 3,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "balance": 100000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "balance": 100000000,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ],
        "tns_names": [
          {
            "name": "alice",
            "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
          },
          {
            "name": "bob.wallet",
            "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 3,
        "source": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
        "tx_type": "ephemeral_message",
        "payload": {
          "sender_name_hash": "71b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242df",
          "recipient_name_hash": "ec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb",
          "message_nonce": 5,
          "ttl_blocks": 100,
          "encrypted_content": "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
          "receiver_handle": "e2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d76"
        },
        "fee": 100000,
        "fee_type": 0,
        "nonce": 5,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "812f6f4f08ef61c71878db888529ccd24a2b062db70d37a56a71ae80e9598500d0b525133d42f9ef1bcdddf15750ac543df50665ae89348104fa3a0de2a0d30c",
        "wire_hex": "0103f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b2491671b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242dfec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb0000000000000005000000640064aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaae2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d7600000000000186a00000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000812f6f4f08ef61c71878db888529ccd24a2b062db70d37a56a71ae80e9598500d0b525133d42f9ef1bcdddf15750ac543df50665ae89348104fa3a0de2a0d30c"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": {
          "network_chain_id": 3,
          "global_state": {
            "total_supply": 0,
            "total_burned": 0,
            "total_energy": 0,
            "block_height": 0,
            "timestamp": 0
          },
          "accounts": [
            {
              "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "balance": 99900000,
              "nonce": 6,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "balance": 100000000,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            }
          ],
          "tns_names": [
            {
              "name": "alice",
              "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
            },
            {
              "name": "bob.wallet",
              "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
            }
          ]
        }
      }
    },
    {
      "name": "ephemeral_message_ttl_too_low",
      "pre_state": {
        "network_chain_id": 3,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "balance": 100000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "balance": 100000000,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ],
        "tns_names": [
          {
            "name": "alice",
            "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
          },
          {
            "name": "bob.wallet",
            "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 3,
        "source": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
        "tx_type": "ephemeral_message",
        "payload": {
          "sender_name_hash": "71b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242df",
          "recipient_name_hash": "ec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb",
          "message_nonce": 5,
          "ttl_blocks": 99,
          "encrypted_content": "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
          "receiver_handle": "e2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d76"
        },
        "fee": 100000,
        "fee_type": 0,
        "nonce": 5,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
        "wire_hex": "0103f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b2491671b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242dfec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb0000000000000005000000630064aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaae2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d7600000000000186a0000000000000000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": false,
        "error": "INVALID_FORMAT",
        "post_state": {
          "network_chain_id": 3,
          "global_state": {
            "total_supply": 0,
            "total_burned": 0,
            "total_energy": 0,
            "block_height": 0,
            "timestamp": 0
          },
          "accounts": [
            {
              "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "balance": 100000000,
              "nonce": 5,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "balance": 100000000,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            }
          ],
          "tns_names": [
            {
              "name": "alice",
              "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
            },
            {
              "name": "bob.wallet",
              "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
            }
          ]
        }
      }
    },
    {
      "name": "ephemeral_message_ttl_too_high",
      "pre_state": {
        "network_chain_id": 3,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "balance": 100000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "balance": 100000000,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ],
        "tns_names": [
          {
            "name": "alice",
            "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
          },
          {
            "name": "bob.wallet",
            "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 3,
        "source": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
        "tx_type": "ephemeral_message",
        "payload": {
          "sender_name_hash": "71b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242df",
          "recipient_name_hash": "ec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb",
          "message_nonce": 5,
          "ttl_blocks": 86401,
          "encrypted_content": "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
          "receiver_handle": "e2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d76"
        },
        "fee": 100000,
        "fee_type": 0,
        "nonce": 5,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
        "wire_hex": "0103f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b2491671b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242dfec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb0000000000000005000151810064aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaae2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d7600000000000186a0000000000000000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": false,
        "error": "INVALID_FORMAT",
        "post_state": {
          "network_chain_id": 3,
          "global_state": {
            "total_supply": 0,
            "total_burned": 0,
            "total_energy": 0,
            "block_height": 0,
            "timestamp": 0
          },
          "accounts": [
            {
              "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "balance": 100000000,
              "nonce": 5,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "balance": 100000000,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            }
          ],
          "tns_names": [
            {
              "name": "alice",
              "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
            },
            {
              "name": "bob.wallet",
              "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
            }
          ]
        }
      }
    },
    {
      "name": "ephemeral_message_content_too_long",
      "pre_state": {
        "network_chain_id": 3,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "balance": 100000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "balance": 100000000,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ],
        "tns_names": [
          {
            "name": "alice",
            "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
          },
          {
            "name": "bob.wallet",
            "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 3,
        "source": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
        "tx_type": "ephemeral_message",
        "payload": {
          "sender_name_hash": "71b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242df",
          "recipient_name_hash": "ec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb",
          "message_nonce": 5,
          "ttl_blocks": 100,
          "encrypted_content": "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
          "receiver_handle": "e2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d76"
        },
        "fee": 100000,
        "fee_type": 0,
        "nonce": 5,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
        "wire_hex": "0103f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b2491671b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242dfec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb00000000000000050000006400bdaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaae2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d7600000000000186a0000000000000000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": false,
        "error": "INVALID_FORMAT",
        "post_state": {
          "network_chain_id": 3,
          "global_state": {
            "total_supply": 0,
            "total_burned": 0,
            "total_energy": 0,
            "block_height": 0,
            "timestamp": 0
          },
          "accounts": [
            {
              "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "balance": 100000000,
              "nonce": 5,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "balance": 100000000,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            }
          ],
          "tns_names": [
            {
              "name": "alice",
              "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
            },
            {
              "name": "bob.wallet",
              "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
            }
          ]
        }
      }
    },
    {
      "name": "ephemeral_message_empty_content",
      "pre_state": {
        "network_chain_id": 3,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "balance": 100000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "balance": 100000000,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ],
        "tns_names": [
          {
            "name": "alice",
            "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
          },
          {
            "name": "bob.wallet",
            "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 3,
        "source": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
        "tx_type": "ephemeral_message",
        "payload": {
          "sender_name_hash": "71b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242df",
          "recipient_name_hash": "ec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb",
          "message_nonce": 5,
          "ttl_blocks": 100,
          "encrypted_content": "",
          "receiver_handle": "e2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d76"
        },
        "fee": 100000,
        "fee_type": 0,
        "nonce": 5,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
        "wire_hex": "0103f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b2491671b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242dfec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb0000000000000005000000640000e2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d7600000000000186a0000000000000000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": false,
        "error": "INVALID_FORMAT",
        "post_state": {
          "network_chain_id": 3,
          "global_state": {
            "total_supply": 0,
            "total_burned": 0,
            "total_energy": 0,
            "block_height": 0,
            "timestamp": 0
          },
          "accounts": [
            {
              "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "balance": 100000000,
              "nonce": 5,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "balance": 100000000,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            }
          ],
          "tns_names": [
            {
              "name": "alice",
              "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
            },
            {
              "name": "bob.wallet",
              "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
            }
          ]
        }
      }
    },
    {
      "name": "ephemeral_message_self_send",
      "pre_state": {
        "network_chain_id": 3,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "balance": 100000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "balance": 100000000,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ],
        "tns_names": [
          {
            "name": "alice",
            "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
          },
          {
            "name": "bob.wallet",
            "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 3,
        "source": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
        "tx_type": "ephemeral_message",
        "payload": {
          "sender_name_hash": "71b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242df",
          "recipient_name_hash": "71b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242df",
          "message_nonce": 5,
          "ttl_blocks": 100,
          "encrypted_content": "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
          "receiver_handle": "e2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d76"
        },
        "fee": 100000,
        "fee_type": 0,
        "nonce": 5,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "1bbf5982ba5264c7c8aea77cd90a98f5e7e50a2951fa5549838d7e8814cc56069f9162fb4cc227a183e0d534d03ecde30352a481c4e497fedc967f64f258470e",
        "wire_hex": "0103f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b2491671b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242df71b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242df0000000000000005000000640064aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaae2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d7600000000000186a000000000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000001bbf5982ba5264c7c8aea77cd90a98f5e7e50a2951fa5549838d7e8814cc56069f9162fb4cc227a183e0d534d03ecde30352a481c4e497fedc967f64f258470e"
      },
      "expected": {
        "ok": false,
        "error": "SELF_OPERATION",
        "post_state": {
          "network_chain_id": 3,
          "global_state": {
            "total_supply": 0,
            "total_burned": 0,
            "total_energy": 0,
            "block_height": 0,
            "timestamp": 0
          },
          "accounts": [
            {
              "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "balance": 100000000,
              "nonce": 5,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "balance": 100000000,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            }
          ],
          "tns_names": [
            {
              "name": "alice",
              "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
            },
            {
              "name": "bob.wallet",
              "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
            }
          ]
        }
      }
    },
    {
      "name": "ephemeral_message_ttl_exact_min",
      "pre_state": {
        "network_chain_id": 3,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "balance": 100000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "balance": 100000000,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ],
        "tns_names": [
          {
            "name": "alice",
            "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
          },
          {
            "name": "bob.wallet",
            "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 3,
        "source": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
        "tx_type": "ephemeral_message",
        "payload": {
          "sender_name_hash": "71b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242df",
          "recipient_name_hash": "ec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb",
          "message_nonce": 5,
          "ttl_blocks": 100,
          "encrypted_content": "bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb",
          "receiver_handle": "e2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d76"
        },
        "fee": 100000,
        "fee_type": 0,
        "nonce": 5,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "7b1172c77d68e6f276c617117b5f3aa1313978566239bc6e1af4f264b5330e0a4c15e1cc3149bd1bc8e531baee53465960e8a6af2544230ccb22dfdf9b813202",
        "wire_hex": "0103f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b2491671b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242dfec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb0000000000000005000000640032bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbe2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d7600000000000186a000000000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000007b1172c77d68e6f276c617117b5f3aa1313978566239bc6e1af4f264b5330e0a4c15e1cc3149bd1bc8e531baee53465960e8a6af2544230ccb22dfdf9b813202"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": {
          "network_chain_id": 3,
          "global_state": {
            "total_supply": 0,
            "total_burned": 0,
            "total_energy": 0,
            "block_height": 0,
            "timestamp": 0
          },
          "accounts": [
            {
              "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "balance": 99900000,
              "nonce": 6,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "balance": 100000000,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            }
          ],
          "tns_names": [
            {
              "name": "alice",
              "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
            },
            {
              "name": "bob.wallet",
              "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
            }
          ]
        }
      }
    },
    {
      "name": "ephemeral_message_ttl_exact_max",
      "pre_state": {
        "network_chain_id": 3,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "balance": 100000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "balance": 100000000,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ],
        "tns_names": [
          {
            "name": "alice",
            "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
          },
          {
            "name": "bob.wallet",
            "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 3,
        "source": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
        "tx_type": "ephemeral_message",
        "payload": {
          "sender_name_hash": "71b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242df",
          "recipient_name_hash": "ec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb",
          "message_nonce": 5,
          "ttl_blocks": 86400,
          "encrypted_content": "bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb",
          "receiver_handle": "e2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d76"
        },
        "fee": 100000,
        "fee_type": 0,
        "nonce": 5,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "395939a7ba468c369dc4856a4251054fc477f0686b934b1d6920f69a6a66b40add79f3f1bfc2040202e1ec219ad22f97bee187c974a15cc91aa82d17f1e2aa05",
        "wire_hex": "0103f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b2491671b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242dfec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb0000000000000005000151800032bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbe2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d7600000000000186a00000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000395939a7ba468c369dc4856a4251054fc477f0686b934b1d6920f69a6a66b40add79f3f1bfc2040202e1ec219ad22f97bee187c974a15cc91aa82d17f1e2aa05"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": {
          "network_chain_id": 3,
          "global_state": {
            "total_supply": 0,
            "total_burned": 0,
            "total_energy": 0,
            "block_height": 0,
            "timestamp": 0
          },
          "accounts": [
            {
              "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "balance": 99900000,
              "nonce": 6,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "balance": 100000000,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            }
          ],
          "tns_names": [
            {
              "name": "alice",
              "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
            },
            {
              "name": "bob.wallet",
              "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
            }
          ]
        }
      }
    },
    {
      "name": "ephemeral_message_content_exact_max",
      "pre_state": {
        "network_chain_id": 3,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "balance": 100000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "balance": 100000000,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ],
        "tns_names": [
          {
            "name": "alice",
            "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
          },
          {
            "name": "bob.wallet",
            "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 3,
        "source": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
        "tx_type": "ephemeral_message",
        "payload": {
          "sender_name_hash": "71b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242df",
          "recipient_name_hash": "ec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb",
          "message_nonce": 5,
          "ttl_blocks": 100,
          "encrypted_content": "cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc",
          "receiver_handle": "e2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d76"
        },
        "fee": 100000,
        "fee_type": 0,
        "nonce": 5,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "fa7927bfae17ea2e93f9844b261d770b621a46b9897b35363d116208d89c6a0cb51197a4440f8b34bec5764d57750d159d3df940537893fa6826d15599d87102",
        "wire_hex": "0103f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b2491671b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242dfec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb00000000000000050000006400bccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccce2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d7600000000000186a00000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000fa7927bfae17ea2e93f9844b261d770b621a46b9897b35363d116208d89c6a0cb51197a4440f8b34bec5764d57750d159d3df940537893fa6826d15599d87102"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": {
          "network_chain_id": 3,
          "global_state": {
            "total_supply": 0,
            "total_burned": 0,
            "total_energy": 0,
            "block_height": 0,
            "timestamp": 0
          },
          "accounts": [
            {
              "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "balance": 99900000,
              "nonce": 6,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "balance": 100000000,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            }
          ],
          "tns_names": [
            {
              "name": "alice",
              "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
            },
            {
              "name": "bob.wallet",
              "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
            }
          ]
        }
      }
    },
    {
      "name": "ephemeral_message_fee_tier1",
      "pre_state": {
        "network_chain_id": 3,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "balance": 100000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "balance": 100000000,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ],
        "tns_names": [
          {
            "name": "alice",
            "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
          },
          {
            "name": "bob.wallet",
            "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 3,
        "source": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
        "tx_type": "ephemeral_message",
        "payload": {
          "sender_name_hash": "71b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242df",
          "recipient_name_hash": "ec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb",
          "message_nonce": 5,
          "ttl_blocks": 100,
          "encrypted_content": "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
          "receiver_handle": "e2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d76"
        },
        "fee": 100000,
        "fee_type": 0,
        "nonce": 5,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "1ec13cd67e0a3ae0234234d0f4191a95141617936e1bd5fcca36984a00faba06ca11e5f1d3ae4dc0c44385210d9941903b661ab02bddb73eed7f67a264fc4904",
        "wire_hex": "0103f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b2491671b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242dfec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb0000000000000005000000640032aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaae2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d7600000000000186a000000000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000001ec13cd67e0a3ae0234234d0f4191a95141617936e1bd5fcca36984a00faba06ca11e5f1d3ae4dc0c44385210d9941903b661ab02bddb73eed7f67a264fc4904"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": {
          "network_chain_id": 3,
          "global_state": {
            "total_supply": 0,
            "total_burned": 0,
            "total_energy": 0,
            "block_height": 0,
            "timestamp": 0
          },
          "accounts": [
            {
              "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "balance": 99900000,
              "nonce": 6,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "balance": 100000000,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            }
          ],
          "tns_names": [
            {
              "name": "alice",
              "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
            },
            {
              "name": "bob.wallet",
              "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
            }
          ]
        }
      }
    },
    {
      "name": "ephemeral_message_fee_tier1_insufficient",
      "pre_state": {
        "network_chain_id": 3,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "balance": 100000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "balance": 100000000,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ],
        "tns_names": [
          {
            "name": "alice",
            "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
          },
          {
            "name": "bob.wallet",
            "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 3,
        "source": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
        "tx_type": "ephemeral_message",
        "payload": {
          "sender_name_hash": "71b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242df",
          "recipient_name_hash": "ec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb",
          "message_nonce": 5,
          "ttl_blocks": 100,
          "encrypted_content": "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
          "receiver_handle": "e2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d76"
        },
        "fee": 4999,
        "fee_type": 0,
        "nonce": 5,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "d488ea118c7bb148be2dd91881e574587da241debd569ae4aec1930d203a250c3e979deaac29cbe8e764ffb5f6d2272628794c235101eda029d3f2135cd32506",
        "wire_hex": "0103f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b2491671b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242dfec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb0000000000000005000000640032aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaae2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d7600000000000013870000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000d488ea118c7bb148be2dd91881e574587da241debd569ae4aec1930d203a250c3e979deaac29cbe8e764ffb5f6d2272628794c235101eda029d3f2135cd32506"
      },
      "expected": {
        "ok": false,
        "error": "INSUFFICIENT_FEE",
        "post_state": {
          "network_chain_id": 3,
          "global_state": {
            "total_supply": 0,
            "total_burned": 0,
            "total_energy": 0,
            "block_height": 0,
            "timestamp": 0
          },
          "accounts": [
            {
              "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "balance": 100000000,
              "nonce": 5,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "balance": 100000000,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            }
          ],
          "tns_names": [
            {
              "name": "alice",
              "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
            },
            {
              "name": "bob.wallet",
              "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
            }
          ]
        }
      }
    },
    {
      "name": "ephemeral_message_fee_tier2",
      "pre_state": {
        "network_chain_id": 3,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "balance": 100000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "balance": 100000000,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ],
        "tns_names": [
          {
            "name": "alice",
            "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
          },
          {
            "name": "bob.wallet",
            "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 3,
        "source": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
        "tx_type": "ephemeral_message",
        "payload": {
          "sender_name_hash": "71b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242df",
          "recipient_name_hash": "ec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb",
          "message_nonce": 5,
          "ttl_blocks": 101,
          "encrypted_content": "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
          "receiver_handle": "e2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d76"
        },
        "fee": 100000,
        "fee_type": 0,
        "nonce": 5,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "6af084bdbd0dbb99313a1d895d0feb4317f108fc706ddb859c10602103414903cc98ac4afa5cc3803519cc2ba605dd4f104d7bf8bd63a3caccf67e8a0f4c9f0f",
        "wire_hex": "0103f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b2491671b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242dfec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb0000000000000005000000650032aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaae2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d7600000000000186a000000000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000006af084bdbd0dbb99313a1d895d0feb4317f108fc706ddb859c10602103414903cc98ac4afa5cc3803519cc2ba605dd4f104d7bf8bd63a3caccf67e8a0f4c9f0f"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": {
          "network_chain_id": 3,
          "global_state": {
            "total_supply": 0,
            "total_burned": 0,
            "total_energy": 0,
            "block_height": 0,
            "timestamp": 0
          },
          "accounts": [
            {
              "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "balance": 99900000,
              "nonce": 6,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "balance": 100000000,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            }
          ],
          "tns_names": [
            {
              "name": "alice",
              "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
            },
            {
              "name": "bob.wallet",
              "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
            }
          ]
        }
      }
    },
    {
      "name": "ephemeral_message_fee_tier2_insufficient",
      "pre_state": {
        "network_chain_id": 3,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "balance": 100000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "balance": 100000000,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ],
        "tns_names": [
          {
            "name": "alice",
            "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
          },
          {
            "name": "bob.wallet",
            "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 3,
        "source": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
        "tx_type": "ephemeral_message",
        "payload": {
          "sender_name_hash": "71b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242df",
          "recipient_name_hash": "ec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb",
          "message_nonce": 5,
          "ttl_blocks": 101,
          "encrypted_content": "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
          "receiver_handle": "e2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d76"
        },
        "fee": 9999,
        "fee_type": 0,
        "nonce": 5,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "9aed9335662ca2fdbdf0dad5ea71dff16ede62d78f3c547f0f44667d4b807102c4a724431ce4e1d390875bd12bfd29f43bfbb4fdf5a981069955b9a9b6610c0b",
        "wire_hex": "0103f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b2491671b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242dfec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb0000000000000005000000650032aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaae2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d76000000000000270f00000000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000009aed9335662ca2fdbdf0dad5ea71dff16ede62d78f3c547f0f44667d4b807102c4a724431ce4e1d390875bd12bfd29f43bfbb4fdf5a981069955b9a9b6610c0b"
      },
      "expected": {
        "ok": false,
        "error": "INSUFFICIENT_FEE",
        "post_state": {
          "network_chain_id": 3,
          "global_state": {
            "total_supply": 0,
            "total_burned": 0,
            "total_energy": 0,
            "block_height": 0,
            "timestamp": 0
          },
          "accounts": [
            {
              "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "balance": 100000000,
              "nonce": 5,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "balance": 100000000,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            }
          ],
          "tns_names": [
            {
              "name": "alice",
              "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
            },
            {
              "name": "bob.wallet",
              "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
            }
          ]
        }
      }
    },
    {
      "name": "ephemeral_message_fee_tier2_boundary",
      "pre_state": {
        "network_chain_id": 3,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "balance": 100000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "balance": 100000000,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ],
        "tns_names": [
          {
            "name": "alice",
            "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
          },
          {
            "name": "bob.wallet",
            "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 3,
        "source": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
        "tx_type": "ephemeral_message",
        "payload": {
          "sender_name_hash": "71b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242df",
          "recipient_name_hash": "ec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb",
          "message_nonce": 5,
          "ttl_blocks": 28800,
          "encrypted_content": "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
          "receiver_handle": "e2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d76"
        },
        "fee": 100000,
        "fee_type": 0,
        "nonce": 5,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "f84682a948ccd8903303afc0ff5fa1e2e99949bbc8905b398619af82a6661a0dbd843ddb810de2ebe6e2bcb3bebc152bde21dd274fbf7e58c9b57670041a1104",
        "wire_hex": "0103f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b2491671b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242dfec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb0000000000000005000070800032aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaae2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d7600000000000186a00000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000f84682a948ccd8903303afc0ff5fa1e2e99949bbc8905b398619af82a6661a0dbd843ddb810de2ebe6e2bcb3bebc152bde21dd274fbf7e58c9b57670041a1104"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": {
          "network_chain_id": 3,
          "global_state": {
            "total_supply": 0,
            "total_burned": 0,
            "total_energy": 0,
            "block_height": 0,
            "timestamp": 0
          },
          "accounts": [
            {
              "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "balance": 99900000,
              "nonce": 6,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "balance": 100000000,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            }
          ],
          "tns_names": [
            {
              "name": "alice",
              "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
            },
            {
              "name": "bob.wallet",
              "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
            }
          ]
        }
      }
    },
    {
      "name": "ephemeral_message_fee_tier3",
      "pre_state": {
        "network_chain_id": 3,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "balance": 100000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "balance": 100000000,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ],
        "tns_names": [
          {
            "name": "alice",
            "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
          },
          {
            "name": "bob.wallet",
            "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 3,
        "source": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
        "tx_type": "ephemeral_message",
        "payload": {
          "sender_name_hash": "71b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242df",
          "recipient_name_hash": "ec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb",
          "message_nonce": 5,
          "ttl_blocks": 28801,
          "encrypted_content": "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
          "receiver_handle": "e2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d76"
        },
        "fee": 100000,
        "fee_type": 0,
        "nonce": 5,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "b318b2590f6619fe33433dc65e440c68cfd0bfe1bcec2ca10094c238f797a901499841e745bdc8e416ad19143fb9b07706c65d5eb7806f4c041b2f35b933690e",
        "wire_hex": "0103f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b2491671b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242dfec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb0000000000000005000070810032aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaae2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d7600000000000186a00000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000b318b2590f6619fe33433dc65e440c68cfd0bfe1bcec2ca10094c238f797a901499841e745bdc8e416ad19143fb9b07706c65d5eb7806f4c041b2f35b933690e"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": {
          "network_chain_id": 3,
          "global_state": {
            "total_supply": 0,
            "total_burned": 0,
            "total_energy": 0,
            "block_height": 0,
            "timestamp": 0
          },
          "accounts": [
            {
              "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "balance": 99900000,
              "nonce": 6,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "balance": 100000000,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            }
          ],
          "tns_names": [
            {
              "name": "alice",
              "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
            },
            {
              "name": "bob.wallet",
              "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
            }
          ]
        }
      }
    },
    {
      "name": "ephemeral_message_fee_tier3_insufficient",
      "pre_state": {
        "network_chain_id": 3,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "balance": 100000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "balance": 100000000,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ],
        "tns_names": [
          {
            "name": "alice",
            "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
          },
          {
            "name": "bob.wallet",
            "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 3,
        "source": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
        "tx_type": "ephemeral_message",
        "payload": {
          "sender_name_hash": "71b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242df",
          "recipient_name_hash": "ec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb",
          "message_nonce": 5,
          "ttl_blocks": 28801,
          "encrypted_content": "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
          "receiver_handle": "e2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d76"
        },
        "fee": 14999,
        "fee_type": 0,
        "nonce": 5,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "ac6ed1f065bcecc4382c586854754475bc8bf24da7ad803a4d6214da0f565b0e1594f395f70206a5956dd509c2ba9b071cc0cabc1c431b6bace144271f84fd05",
        "wire_hex": "0103f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b2491671b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242dfec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb0000000000000005000070810032aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaae2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d760000000000003a970000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000ac6ed1f065bcecc4382c586854754475bc8bf24da7ad803a4d6214da0f565b0e1594f395f70206a5956dd509c2ba9b071cc0cabc1c431b6bace144271f84fd05"
      },
      "expected": {
        "ok": false,
        "error": "INSUFFICIENT_FEE",
        "post_state": {
          "network_chain_id": 3,
          "global_state": {
            "total_supply": 0,
            "total_burned": 0,
            "total_energy": 0,
            "block_height": 0,
            "timestamp": 0
          },
          "accounts": [
            {
              "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "balance": 100000000,
              "nonce": 5,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "balance": 100000000,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            }
          ],
          "tns_names": [
            {
              "name": "alice",
              "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
            },
            {
              "name": "bob.wallet",
              "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
            }
          ]
        }
      }
    },
    {
      "name": "ephemeral_message_fee_max_ttl",
      "pre_state": {
        "network_chain_id": 3,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "balance": 100000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "balance": 100000000,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ],
        "tns_names": [
          {
            "name": "alice",
            "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
          },
          {
            "name": "bob.wallet",
            "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 3,
        "source": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
        "tx_type": "ephemeral_message",
        "payload": {
          "sender_name_hash": "71b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242df",
          "recipient_name_hash": "ec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb",
          "message_nonce": 5,
          "ttl_blocks": 86400,
          "encrypted_content": "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
          "receiver_handle": "e2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d76"
        },
        "fee": 100000,
        "fee_type": 0,
        "nonce": 5,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "954b0308348b67ac5ef51aea8a6a2aa3318f340cab757f498c380ad949e1c40646094b76b08094f2897a739ff748df203268c197a2c19d5b55802cd6c2781a05",
        "wire_hex": "0103f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b2491671b278f3dc434447fc620500e47b6a80b0cb0df76a1051119fe19ed4953242dfec7a3ac4e33002e8327b7daae1c5c70ba01f2ad4db0b6d7d5c424db97d5154eb0000000000000005000151800032aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaae2f2ae0a6abc4e71a884a961c500515f58e30b6aa582dd8db6a65945e08d2d7600000000000186a00000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000954b0308348b67ac5ef51aea8a6a2aa3318f340cab757f498c380ad949e1c40646094b76b08094f2897a739ff748df203268c197a2c19d5b55802cd6c2781a05"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": {
          "network_chain_id": 3,
          "global_state": {
            "total_supply": 0,
            "total_burned": 0,
            "total_energy": 0,
            "block_height": 0,
            "timestamp": 0
          },
          "accounts": [
            {
              "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "balance": 99900000,
              "nonce": 6,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "balance": 100000000,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            }
          ],
          "tns_names": [
            {
              "name": "alice",
              "owner": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
            },
            {
              "name": "bob.wallet",
              "owner": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
            }
          ]
        }
      }
    }
  ]
}