{
  "cases": [
    {
      "name": "batch_referral_reward_success",
      "pre_state": {
        "network_chain_id": 3,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "balance": 1000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "balance": 0,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "7ea555bf91bfb985561a91afcd669a79c0cc115ce03baf687cb8dd7e1e996e7b",
            "balance": 0,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ],
        "referrals": [
          {
            "user": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "referrer": "7ea555bf91bfb985561a91afcd669a79c0cc115ce03baf687cb8dd7e1e996e7b"
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 3,
        "source": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
        "tx_type": "batch_referral_reward",
        "payload": {
          "asset": "0000000000000000000000000000000000000000000000000000000000000000",
          "total_amount": 100000,
          "levels": 1,
          "ratios": [
            5000
          ],
          "from_user": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
        },
        "fee": 100000,
        "fee_type": 0,
        "nonce": 5,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "cc47e920d28dbf55cfc888386c3ee7c51aad1e6da5cedefd9e7761479698dc0f3a013ab7267eac4237a3638f35dee37949b314b56e5a6fc53a7745eb371e3e04",
        "wire_hex": "0103f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249080000000000000000000000000000000000000000000000000000000000000000c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e3782400000000000186a00101138800000000000186a00000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000cc47e920d28dbf55cfc888386c3ee7c51aad1e6da5cedefd9e7761479698dc0f3a013ab7267eac4237a3638f35dee37949b314b56e5a6fc53a7745eb371e3e04"
      },
      "expected": {
        "ok": false,
        "error": "UNAUTHORIZED",
        "post_state": {
          "network_chain_id": 3,
          "global_state": {
            "total_supply": 0,
            "total_burned": 0,
            "total_energy": 0,
            "block_height": 0,
            "timestamp": 0
          },
          "accounts": [
            {
              "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "balance": 1000000,
              "nonce": 5,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "balance": 0,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "7ea555bf91bfb985561a91afcd669a79c0cc115ce03baf687cb8dd7e1e996e7b",
              "balance": 0,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            }
          ],
          "referrals": [
            {
              "user": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "referrer": "7ea555bf91bfb985561a91afcd669a79c0cc115ce03baf687cb8dd7e1e996e7b"
            }
          ]
        }
      }
    },
    {
      "name": "batch_referral_reward_nonce_too_low",
      "pre_state": {
        "network_chain_id": 3,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "balance": 1000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "balance": 1000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "7ea555bf91bfb985561a91afcd669a79c0cc115ce03baf687cb8dd7e1e996e7b",
            "balance": 0,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ],
        "referrals": [
          {
            "user": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "referrer": "7ea555bf91bfb985561a91afcd669a79c0cc115ce03baf687cb8dd7e1e996e7b"
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 3,
        "source": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
        "tx_type": "batch_referral_reward",
        "payload": {
          "asset": "0000000000000000000000000000000000000000000000000000000000000000",
          "total_amount": 100000,
          "levels": 1,
          "ratios": [
            5000
          ],
          "from_user": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
        },
        "fee": 100000,
        "fee_type": 0,
        "nonce": 4,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "187d373b5c998880d8f760c1bc3949c9c58d75deedb75f6fdbb99bef774780039f661ebbd2551f0374e9391e4945455333ae5cf5b861b840dc81e2350561350c",
        "wire_hex": "0103c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824080000000000000000000000000000000000000000000000000000000000000000c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e3782400000000000186a00101138800000000000186a00000000000000000040000000000000000000000000000000000000000000000000000000000000000000000000000000000187d373b5c998880d8f760c1bc3949c9c58d75deedb75f6fdbb99bef774780039f661ebbd2551f0374e9391e4945455333ae5cf5b861b840dc81e2350561350c"
      },
      "expected": {
        "ok": false,
        "error": "NONCE_TOO_LOW",
        "post_state": {
          "network_chain_id": 3,
          "global_state": {
            "total_supply": 0,
            "total_burned": 0,
            "total_energy": 0,
            "block_height": 0,
            "timestamp": 0
          },
          "accounts": [
            {
              "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "balance": 1000000,
              "nonce": 5,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "balance": 1000000,
              "nonce": 5,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "7ea555bf91bfb985561a91afcd669a79c0cc115ce03baf687cb8dd7e1e996e7b",
              "balance": 0,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            }
          ],
          "referrals": [
            {
              "user": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "referrer": "7ea555bf91bfb985561a91afcd669a79c0cc115ce03baf687cb8dd7e1e996e7b"
            }
          ]
        }
      }
    },
    {
      "name": "batch_referral_reward_nonce_too_high_strict",
      "pre_state": {
        "network_chain_id": 3,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "balance": 1000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "balance": 1000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "7ea555bf91bfb985561a91afcd669a79c0cc115ce03baf687cb8dd7e1e996e7b",
            "balance": 0,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ],
        "referrals": [
          {
            "user": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "referrer": "7ea555bf91bfb985561a91afcd669a79c0cc115ce03baf687cb8dd7e1e996e7b"
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 3,
        "source": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
        "tx_type": "batch_referral_reward",
        "payload": {
          "asset": "0000000000000000000000000000000000000000000000000000000000000000",
          "total_amount": 100000,
          "levels": 1,
          "ratios": [
            5000
          ],
          "from_user": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
        },
        "fee": 100000,
        "fee_type": 0,
        "nonce": 6,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "0b4bd3dd63a9c249472930fa1be60a9f41929ccd9bfc05fdd07bcf1aad85af0842ae5c1d189f3b9946bad661a1e6cf8c369a8aa73edaadd6d3ffa66568a7d307",
        "wire_hex": "0103c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824080000000000000000000000000000000000000000000000000000000000000000c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e3782400000000000186a00101138800000000000186a000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000b4bd3dd63a9c249472930fa1be60a9f41929ccd9bfc05fdd07bcf1aad85af0842ae5c1d189f3b9946bad661a1e6cf8c369a8aa73edaadd6d3ffa66568a7d307"
      },
      "expected": {
        "ok": false,
        "error": "NONCE_TOO_HIGH",
        "post_state": {
          "network_chain_id": 3,
          "global_state": {
            "total_supply": 0,
            "total_burned": 0,
            "total_energy": 0,
            "block_height": 0,
            "timestamp": 0
          },
          "accounts": [
            {
              "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "balance": 1000000,
              "nonce": 5,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "balance": 1000000,
              "nonce": 5,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "7ea555bf91bfb985561a91afcd669a79c0cc115ce03baf687cb8dd7e1e996e7b",
              "balance": 0,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            }
          ],
          "referrals": [
            {
              "user": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "referrer": "7ea555bf91bfb985561a91afcd669a79c0cc115ce03baf687cb8dd7e1e996e7b"
            }
          ]
        }
      }
    },
    {
      "name": "batch_referral_reward_zero_amount",
      "pre_state": {
        "network_chain_id": 3,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "balance": 1000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "balance": 0,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 3,
        "source": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
        "tx_type": "batch_referral_reward",
        "payload": {
          "asset": "0000000000000000000000000000000000000000000000000000000000000000",
          "total_amount": 0,
          "levels": 1,
          "ratios": [
            5000
          ],
          "from_user": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
        },
        "fee": 100000,
        "fee_type": 0,
        "nonce": 5,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "46ba7b501a53bc470ec1e49e6b00c8247cd1787194a943b40d3b8e796f50590f2dbe7abf0e7cd84570b352ca3bf1c9cff8907732e251dc540e5b324994b70c03",
        "wire_hex": "0103f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249080000000000000000000000000000000000000000000000000000000000000000c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e3782400000000000000000101138800000000000186a0000000000000000005000000000000000000000000000000000000000000000000000000000000000000000000000000000046ba7b501a53bc470ec1e49e6b00c8247cd1787194a943b40d3b8e796f50590f2dbe7abf0e7cd84570b352ca3bf1c9cff8907732e251dc540e5b324994b70c03"
      },
      "expected": {
        "ok": false,
        "error": "UNAUTHORIZED",
        "post_state": {
          "network_chain_id": 3,
          "global_state": {
            "total_supply": 0,
            "total_burned": 0,
            "total_energy": 0,
            "block_height": 0,
            "timestamp": 0
          },
          "accounts": [
            {
              "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "balance": 1000000,
              "nonce": 5,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "balance": 0,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            }
          ]
        }
      }
    },
    {
      "name": "batch_referral_reward_empty_levels",
      "pre_state": {
        "network_chain_id": 3,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "balance": 1000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "balance": 0,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 3,
        "source": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
        "tx_type": "batch_referral_reward",
        "payload": {
          "asset": "0000000000000000000000000000000000000000000000000000000000000000",
          "total_amount": 100000,
          "levels": 0,
          "ratios": [],
          "from_user": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
        },
        "fee": 100000,
        "fee_type": 0,
        "nonce": 5,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "9d111c5582271bd817bbf043cd8ab0f82d46677de6c36e13938b3add8aaab10959a1d47265c15ca3699a2af71ffb881a93afe3cd90c6a2b1cec14eef1178af0f",
        "wire_hex": "0103f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249080000000000000000000000000000000000000000000000000000000000000000c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e3782400000000000186a0000000000000000186a000000000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000009d111c5582271bd817bbf043cd8ab0f82d46677de6c36e13938b3add8aaab10959a1d47265c15ca3699a2af71ffb881a93afe3cd90c6a2b1cec14eef1178af0f"
      },
      "expected": {
        "ok": false,
        "error": "UNAUTHORIZED",
        "post_state": {
          "network_chain_id": 3,
          "global_state": {
            "total_supply": 0,
            "total_burned": 0,
            "total_energy": 0,
            "block_height": 0,
            "timestamp": 0
          },
          "accounts": [
            {
              "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "balance": 1000000,
              "nonce": 5,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "balance": 0,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            }
          ]
        }
      }
    },
    {
      "name": "batch_referral_reward_ratio_exceeds_max",
      "pre_state": {
        "network_chain_id": 3,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "balance": 1000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "balance": 0,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 3,
        "source": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
        "tx_type": "batch_referral_reward",
        "payload": {
          "asset": "0000000000000000000000000000000000000000000000000000000000000000",
          "total_amount": 100000,
          "levels": 2,
          "ratios": [
            6000,
            5000
          ],
          "from_user": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
        },
        "fee": 100000,
        "fee_type": 0,
        "nonce": 5,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "e4f3af4fcf0281faaf450c1eb9c8740e65bc9b5509c50ed452b3c9382ae26208099ef36f7c787274d4a50e8c1973fcf165a229f6401865d152e2407d813d190f",
        "wire_hex": "0103f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249080000000000000000000000000000000000000000000000000000000000000000c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e3782400000000000186a002021770138800000000000186a00000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000e4f3af4fcf0281faaf450c1eb9c8740e65bc9b5509c50ed452b3c9382ae26208099ef36f7c787274d4a50e8c1973fcf165a229f6401865d152e2407d813d190f"
      },
      "expected": {
        "ok": false,
        "error": "UNAUTHORIZED",
        "post_state": {
          "network_chain_id": 3,
          "global_state": {
            "total_supply": 0,
            "total_burned": 0,
            "total_energy": 0,
            "block_height": 0,
            "timestamp": 0
          },
          "accounts": [
            {
              "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "balance": 1000000,
              "nonce": 5,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "balance": 0,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            }
          ]
        }
      }
    },
    {
      "name": "batch_referral_reward_levels_mismatch",
      "pre_state": {
        "network_chain_id": 3,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "balance": 1000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "balance": 0,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 3,
        "source": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
        "tx_type": "batch_referral_reward",
        "payload": {
          "asset": "0000000000000000000000000000000000000000000000000000000000000000",
          "total_amount": 100000,
          "levels": 3,
          "ratios": [
            5000,
            3000
          ],
          "from_user": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
        },
        "fee": 100000,
        "fee_type": 0,
        "nonce": 5,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "cb7a962abfcade88b9aede226d1037213bdb1b33db610ebcdbc6109c01953f0bc64006dab2dfe2df2c3eb20630c96860a20d52d2d12ae1cf6cec94ce10dbea0e",
        "wire_hex": "0103f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249080000000000000000000000000000000000000000000000000000000000000000c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e3782400000000000186a0030213880bb800000000000186a00000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000cb7a962abfcade88b9aede226d1037213bdb1b33db610ebcdbc6109c01953f0bc64006dab2dfe2df2c3eb20630c96860a20d52d2d12ae1cf6cec94ce10dbea0e"
      },
      "expected": {
        "ok": false,
        "error": "UNAUTHORIZED",
        "post_state": {
          "network_chain_id": 3,
          "global_state": {
            "total_supply": 0,
            "total_burned": 0,
            "total_energy": 0,
            "block_height": 0,
            "timestamp": 0
          },
          "accounts": [
            {
              "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "balance": 1000000,
              "nonce": 5,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "balance": 0,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            }
          ]
        }
      }
    },
    {
      "name": "batch_referral_reward_max_ratio",
      "pre_state": {
        "network_chain_id": 3,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "balance": 1000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "balance": 0,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "7ea555bf91bfb985561a91afcd669a79c0cc115ce03baf687cb8dd7e1e996e7b",
            "balance": 0,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ],
        "referrals": [
          {
            "user": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "referrer": "7ea555bf91bfb985561a91afcd669a79c0cc115ce03baf687cb8dd7e1e996e7b"
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 3,
        "source": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
        "tx_type": "batch_referral_reward",
        "payload": {
          "asset": "0000000000000000000000000000000000000000000000000000000000000000",
          "total_amount": 100000,
          "levels": 1,
          "ratios": [
            10000
          ],
          "from_user": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
        },
        "fee": 100000,
        "fee_type": 0,
        "nonce": 5,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "63a9574817c69192e3afc2f964021913d2bdace2e6309ead68a62c03efd5b302f63fe0878bbb2eaf8f91bba391d0c534524044de014f45156c78c01f980c2008",
        "wire_hex": "0103f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249080000000000000000000000000000000000000000000000000000000000000000c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e3782400000000000186a00101271000000000000186a0000000000000000005000000000000000000000000000000000000000000000000000000000000000000000000000000000063a9574817c69192e3afc2f964021913d2bdace2e6309ead68a62c03efd5b302f63fe0878bbb2eaf8f91bba391d0c534524044de014f45156c78c01f980c2008"
      },
      "expected": {
        "ok": false,
        "error": "UNAUTHORIZED",
        "post_state": {
          "network_chain_id": 3,
          "global_state": {
            "total_supply": 0,
            "total_burned": 0,
            "total_energy": 0,
            "block_height": 0,
            "timestamp": 0
          },
          "accounts": [
            {
              "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "balance": 1000000,
              "nonce": 5,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "balance": 0,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "7ea555bf91bfb985561a91afcd669a79c0cc115ce03baf687cb8dd7e1e996e7b",
              "balance": 0,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            }
          ],
          "referrals": [
            {
              "user": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "referrer": "7ea555bf91bfb985561a91afcd669a79c0cc115ce03baf687cb8dd7e1e996e7b"
            }
          ]
        }
      }
    },
    {
      "name": "batch_referral_reward_sender_not_from_user",
      "pre_state": {
        "network_chain_id": 3,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "balance": 1000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "balance": 0,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "7ea555bf91bfb985561a91afcd669a79c0cc115ce03baf687cb8dd7e1e996e7b",
            "balance": 0,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ],
        "referrals": [
          {
            "user": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "referrer": "7ea555bf91bfb985561a91afcd669a79c0cc115ce03baf687cb8dd7e1e996e7b"
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 3,
        "source": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
        "tx_type": "batch_referral_reward",
        "payload": {
          "asset": "0000000000000000000000000000000000000000000000000000000000000000",
          "total_amount": 100000,
          "levels": 1,
          "ratios": [
            5000
          ],
          "from_user": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824"
        },
        "fee": 100000,
        "fee_type": 0,
        "nonce": 5,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "cc47e920d28dbf55cfc888386c3ee7c51aad1e6da5cedefd9e7761479698dc0f3a013ab7267eac4237a3638f35dee37949b314b56e5a6fc53a7745eb371e3e04",
        "wire_hex": "0103f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249080000000000000000000000000000000000000000000000000000000000000000c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e3782400000000000186a00101138800000000000186a00000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000cc47e920d28dbf55cfc888386c3ee7c51aad1e6da5cedefd9e7761479698dc0f3a013ab7267eac4237a3638f35dee37949b314b56e5a6fc53a7745eb371e3e04"
      },
      "expected": {
        "ok": false,
        "error": "UNAUTHORIZED",
        "post_state": {
          "network_chain_id": 3,
          "global_state": {
            "total_supply": 0,
            "total_burned": 0,
            "total_energy": 0,
            "block_height": 0,
            "timestamp": 0
          },
          "accounts": [
            {
              "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "balance": 1000000,
              "nonce": 5,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "balance": 0,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "7ea555bf91bfb985561a91afcd669a79c0cc115ce03baf687cb8dd7e1e996e7b",
              "balance": 0,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            }
          ],
          "referrals": [
            {
              "user": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "referrer": "7ea555bf91bfb985561a91afcd669a79c0cc115ce03baf687cb8dd7e1e996e7b"
            }
          ]
        }
      }
    },
    {
      "name": "batch_referral_reward_sender_is_from_user",
      "pre_state": {
        "network_chain_id": 3,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "balance": 1000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "balance": 0,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "7ea555bf91bfb985561a91afcd669a79c0cc115ce03baf687cb8dd7e1e996e7b",
            "balance": 0,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ],
        "referrals": [
          {
            "user": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "referrer": "7ea555bf91bfb985561a91afcd669a79c0cc115ce03baf687cb8dd7e1e996e7b"
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 3,
        "source": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
        "tx_type": "batch_referral_reward",
        "payload": {
          "asset": "0000000000000000000000000000000000000000000000000000000000000000",
          "total_amount": 100000,
          "levels": 1,
          "ratios": [
            5000
          ],
          "from_user": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
        },
        "fee": 100000,
        "fee_type": 0,
        "nonce": 5,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "2f1a2014c8fd1f1ab15069e287b4eb1b27550195966441df4151d46505f94e0f0aa592c9b87203bdfeba89b013fc1550432fc8c2e15dd7724cb8ee77f278cb06",
        "wire_hex": "0103f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249080000000000000000000000000000000000000000000000000000000000000000f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b24900000000000186a00101138800000000000186a000000000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000002f1a2014c8fd1f1ab15069e287b4eb1b27550195966441df4151d46505f94e0f0aa592c9b87203bdfeba89b013fc1550432fc8c2e15dd7724cb8ee77f278cb06"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": {
          "network_chain_id": 3,
          "global_state": {
            "total_supply": 0,
            "total_burned": 0,
            "total_energy": 0,
            "block_height": 0,
            "timestamp": 0
          },
          "accounts": [
            {
              "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "balance": 800000,
              "nonce": 6,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "balance": 0,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "7ea555bf91bfb985561a91afcd669a79c0cc115ce03baf687cb8dd7e1e996e7b",
              "balance": 50000,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            }
          ],
          "referrals": [
            {
              "user": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "referrer": "7ea555bf91bfb985561a91afcd669a79c0cc115ce03baf687cb8dd7e1e996e7b"
            }
          ]
        }
      }
    },
    {
      "name": "batch_referral_reward_insufficient_balance",
      "pre_state": {
        "network_chain_id": 3,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "balance": 50000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "balance": 0,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "7ea555bf91bfb985561a91afcd669a79c0cc115ce03baf687cb8dd7e1e996e7b",
            "balance": 0,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ],
        "referrals": [
          {
            "user": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "referrer": "7ea555bf91bfb985561a91afcd669a79c0cc115ce03baf687cb8dd7e1e996e7b"
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 3,
        "source": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
        "tx_type": "batch_referral_reward",
        "payload": {
          "asset": "0000000000000000000000000000000000000000000000000000000000000000",
          "total_amount": 100000,
          "levels": 1,
          "ratios": [
            5000
          ],
          "from_user": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
        },
        "fee": 100000,
        "fee_type": 0,
        "nonce": 5,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "2f1a2014c8fd1f1ab15069e287b4eb1b27550195966441df4151d46505f94e0f0aa592c9b87203bdfeba89b013fc1550432fc8c2e15dd7724cb8ee77f278cb06",
        "wire_hex": "0103f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249080000000000000000000000000000000000000000000000000000000000000000f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b24900000000000186a00101138800000000000186a000000000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000002f1a2014c8fd1f1ab15069e287b4eb1b27550195966441df4151d46505f94e0f0aa592c9b87203bdfeba89b013fc1550432fc8c2e15dd7724cb8ee77f278cb06"
      },
      "expected": {
        "ok": false,
        "error": "INSUFFICIENT_FEE",
        "post_state": {
          "network_chain_id": 3,
          "global_state": {
            "total_supply": 0,
            "total_burned": 0,
            "total_energy": 0,
            "block_height": 0,
            "timestamp": 0
          },
          "accounts": [
            {
              "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "balance": 50000,
              "nonce": 5,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "balance": 0,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "7ea555bf91bfb985561a91afcd669a79c0cc115ce03baf687cb8dd7e1e996e7b",
              "balance": 0,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            }
          ],
          "referrals": [
            {
              "user": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "referrer": "7ea555bf91bfb985561a91afcd669a79c0cc115ce03baf687cb8dd7e1e996e7b"
            }
          ]
        }
      }
    },
    {
      "name": "batch_referral_reward_zero_levels",
      "pre_state": {
        "network_chain_id": 3,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
            "balance": 1000000,
            "nonce": 5,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          },
          {
            "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
            "balance": 0,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 3,
        "source": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
        "tx_type": "batch_referral_reward",
        "payload": {
          "asset": "0000000000000000000000000000000000000000000000000000000000000000",
          "total_amount": 100000,
          "levels": 0,
          "ratios": [],
          "from_user": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249"
        },
        "fee": 100000,
        "fee_type": 0,
        "nonce": 5,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "065b925358d2749156749e4f4702b2abc58e72ce1611163275ef3bde3b33d4010ff53446d93456a4aa832139a8226f5846aabe79174aed9c4ffa2cd35afb0009",
        "wire_hex": "0103f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249080000000000000000000000000000000000000000000000000000000000000000f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b24900000000000186a0000000000000000186a00000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000065b925358d2749156749e4f4702b2abc58e72ce1611163275ef3bde3b33d4010ff53446d93456a4aa832139a8226f5846aabe79174aed9c4ffa2cd35afb0009"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": {
          "network_chain_id": 3,
          "global_state": {
            "total_supply": 0,
            "total_burned": 0,
            "total_energy": 0,
            "block_height": 0,
            "timestamp": 0
          },
          "accounts": [
            {
              "address": "f05bc1df2831717c2992d85b57e0cf3d123fd6c254257de5f784be369747b249",
              "balance": 800000,
              "nonce": 6,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            },
            {
              "address": "c29d170ab8a5b42a3520878501a87a27f9b5653fca8b0c59fc2786cf26e37824",
              "balance": 0,
              "nonce": 0,
              "frozen": 0,
              "energy": 0,
              "flags": 0,
              "data": ""
            }
          ]
        }
      }
    }
  ]
}