{
  "cases": [
    {
      "name": "tx_agent_account_register",
      "description": "Register new AI agent account",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "35012908adad661b328f5bc866ce019fc7b9f54d9713f3ebaf7fe85ce0c6e0a0",
            "balance": 100000000,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "35012908adad661b328f5bc866ce019fc7b9f54d9713f3ebaf7fe85ce0c6e0a0",
        "tx_type": "agentaccount",
        "payload": [],
        "fee": 30000,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "tx_agent_account_register_minimal",
      "description": "Register agent with minimal config",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "agentaccount",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "tx_agent_account_register_already_agent",
      "description": "Cannot register if already an agent",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "agentaccount",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": false,
        "error": "ALREADY_AGENT_ACCOUNT",
        "post_state": null
      }
    },
    {
      "name": "tx_agent_account_update_policy",
      "description": "Update agent policy",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "agentaccount",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "tx_agent_account_update_policy_not_controller",
      "description": "Only controller can update policy",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "agentaccount",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": false,
        "error": "NOT_CONTROLLER",
        "post_state": null
      }
    },
    {
      "name": "tx_agent_account_rotate_controller",
      "description": "Rotate agent controller",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "agentaccount",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "tx_agent_account_rotate_controller_same",
      "description": "Cannot rotate to same controller",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "agentaccount",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": false,
        "error": "SAME_CONTROLLER",
        "post_state": null
      }
    },
    {
      "name": "tx_agent_account_set_status",
      "description": "Set agent status",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "agentaccount",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "tx_agent_account_set_status_invalid",
      "description": "Invalid status value rejected",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "agentaccount",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": false,
        "error": "INVALID_STATUS",
        "post_state": null
      }
    },
    {
      "name": "tx_agent_account_set_energy_pool",
      "description": "Set energy pool for agent",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "c51594b5546b343224ffe338b50c1217edf91997a0a3788b06b7d250f8f41e25",
            "balance": 0,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "c51594b5546b343224ffe338b50c1217edf91997a0a3788b06b7d250f8f41e25",
        "tx_type": "agentaccount",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "tx_agent_account_clear_energy_pool",
      "description": "Clear energy pool assignment",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "agentaccount",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "tx_agent_account_set_session_key_root",
      "description": "Set session key merkle root",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "agentaccount",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "tx_agent_account_add_session_key",
      "description": "Add individual session key",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "agentaccount",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "tx_agent_account_add_session_key_max_reached",
      "description": "Cannot exceed max session keys",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "agentaccount",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": false,
        "error": "MAX_SESSION_KEYS_REACHED",
        "post_state": null
      }
    },
    {
      "name": "tx_agent_account_add_session_key_duplicate",
      "description": "Cannot add duplicate session key",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "agentaccount",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": false,
        "error": "DUPLICATE_SESSION_KEY",
        "post_state": null
      }
    },
    {
      "name": "tx_agent_account_revoke_session_key",
      "description": "Revoke session key",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "agentaccount",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "tx_agent_account_revoke_session_key_not_found",
      "description": "Cannot revoke non-existent key",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "agentaccount",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": false,
        "error": "SESSION_KEY_NOT_FOUND",
        "post_state": null
      }
    },
    {
      "name": "tx_agent_account_not_agent",
      "description": "Non-agent cannot use agent operations",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "agentaccount",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": false,
        "error": "NOT_AGENT_ACCOUNT",
        "post_state": null
      }
    },
    {
      "name": "tx_agent_account_variants",
      "description": "AgentAccountPayload variant enumeration",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": null,
      "expected": {
        "ok": false,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "tx_agent_account_payload_structure",
      "description": "AgentAccountPayload wire format",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": null,
      "expected": {
        "ok": false,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "tx_agent_account_gas_costs",
      "description": "AgentAccount gas costs by variant",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": null,
      "expected": {
        "ok": false,
        "error": null,
        "post_state": null
      }
    }
  ]
}
