{
  "cases": [
    {
      "name": "tx_withdraw_unfrozen_basic",
      "description": "Basic withdrawal of matured pending unfreeze",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": [
          {
            "address": "61155c3585545c8f07cad5113d6c0920c7260ee0fd60e526bf175863c799f520",
            "balance": 0,
            "nonce": 0,
            "frozen": 0,
            "energy": 0,
            "flags": 0,
            "data": ""
          }
        ]
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "61155c3585545c8f07cad5113d6c0920c7260ee0fd60e526bf175863c799f520",
        "tx_type": "energy",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "tx_withdraw_unfrozen_multiple",
      "description": "Withdraw multiple matured pending unfreezes",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "energy",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "tx_withdraw_unfrozen_none_matured",
      "description": "Withdraw with no matured unfreezes",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "energy",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": false,
        "error": "NO_PENDING_UNFREEZE_MATURED",
        "post_state": null
      }
    },
    {
      "name": "tx_withdraw_unfrozen_no_pending",
      "description": "Withdraw with empty pending list",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "energy",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": false,
        "error": "NO_PENDING_UNFREEZE",
        "post_state": null
      }
    },
    {
      "name": "tx_withdraw_unfrozen_partial_list",
      "description": "Only expired entries are withdrawn",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "energy",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "tx_withdraw_unfrozen_at_exact_expiry",
      "description": "Withdrawal at exactly expire_topoheight",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "energy",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "tx_withdraw_unfrozen_balance_accumulation",
      "description": "Withdrawn TOS adds to existing balance",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "energy",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "tx_withdraw_unfrozen_overflow_protection",
      "description": "Withdrawal uses checked arithmetic",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "energy",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": false,
        "error": "BALANCE_OVERFLOW",
        "post_state": null
      }
    },
    {
      "name": "tx_withdraw_unfrozen_free_operation",
      "description": "WithdrawUnfrozen is a free operation",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": {
        "version": 1,
        "chain_id": 0,
        "source": "7d1aa223722b2aaa89b92fc6b2ef0baa709c01eab9f8494b1de5c335f2750707",
        "tx_type": "energy",
        "payload": [],
        "fee": 0,
        "fee_type": 0,
        "nonce": 0,
        "reference_hash": "0000000000000000000000000000000000000000000000000000000000000000",
        "reference_topoheight": 0,
        "signature": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      },
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "tx_withdraw_unfrozen_payload_structure",
      "description": "WithdrawUnfrozen payload wire format",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": null,
      "expected": {
        "ok": false,
        "error": null,
        "post_state": null
      }
    },
    {
      "name": "tx_withdraw_unfrozen_idempotent",
      "description": "Multiple withdrawals process remaining items",
      "pre_state": {
        "network_chain_id": 0,
        "global_state": {
          "total_supply": 0,
          "total_burned": 0,
          "total_energy": 0,
          "block_height": 0,
          "timestamp": 0
        },
        "accounts": []
      },
      "tx": null,
      "expected": {
        "ok": true,
        "error": null,
        "post_state": null
      }
    }
  ]
}
